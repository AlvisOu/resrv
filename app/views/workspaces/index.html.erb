<h2>Search All Workspaces</h2>
<%= form_with(url: workspaces_path, method: :get) do |form| %>
  <%= form.label :query, "Find a workspace by name or ID:" %>
  <%= form.text_field :query, value: params[:query] %>
  <%= form.submit "Search" %>
<% end %>

<% if params[:query].present? %>
  
  <h2>Search Results</h2>
  <% if @workspaces.any? %>
    <ul>
      <% @workspaces.each do |workspace| %>
        <li>
          <%= link_to workspace.name, workspace_path(workspace) %>
        </li>
      <% end %>
    </ul>
  <% else %>
    <p>No workspaces found matching "<%= params[:query] %>".</p>
  <% end %>

<% else %>

  <h1>My Workspaces</h1>
  <%= link_to "Create New Workspace", new_workspace_path, class: "button" %>
  
  <h2>Workspaces I Own</h2>
  <div class="my-workspaces-list">
    <% if @owned_workspaces.any? %>
      <% @owned_workspaces.each do |workspace| %>
        <div>
          <%= link_to workspace.name, workspace_path(workspace), class: "button" %>
        </div>
      <% end %>
    <% else %>
      <p>You do not own any workspaces.</p>
    <% end %>
  </div>

  <h2>Workspaces I Joined</h2>
  <div class="my-workspaces-list">
    <% if @joined_workspaces.any? %>
      <% @joined_workspaces.each do |workspace| %>
        <div>
          <%= link_to workspace.name, workspace_path(workspace), class: "button" %>
        </div>
      <% end %>
    <% else %>
      <p>You have not joined any other workspaces.</p>
    <% end %>
  </div>

  <% if @owned_workspaces.none? && @joined_workspaces.none? %>
    <p>You are not a member of any workspaces yet.</p>
  <% end %>
  
<% end %>